    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Your Gift Exchange Dashboard</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <div class="container">
            <button onclick="window.location.href='index.html'">Back</button>
            <div class="history-section">
                <button id="historyBtn">Tap to see history</button>
                <div id="historyList" class="hidden">
                    <h3>All Users' Names & Wishlists</h3>
                    <div id="userGrid"></div>
                </div>
            </div>
        </div>
        <script type="module">
            import { loadHistory } from './firebase.js';
            
            // Load current user (redirect if not logged in)
            let currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) {
                alert('No user data found. Please register first.');
                window.location.href = 'index.html';
            }
            
            // Check if history was visible and load it
            const historyVisible = localStorage.getItem('historyVisible') === 'true';
            const historyList = document.getElementById('historyList');
            if (historyVisible) {
                historyList.classList.remove('hidden');
                loadHistory(displayHistory);
            }
            
            // History button
            document.getElementById('historyBtn').addEventListener('click', function() {
                const isHidden = historyList.classList.contains('hidden');
                if (isHidden) {
                    historyList.classList.remove('hidden');
                    loadHistory(displayHistory);
                    localStorage.setItem('historyVisible', 'true');
                } else {
                    historyList.classList.add('hidden');
                    localStorage.setItem('historyVisible', 'false');
                }
            });
            
            function displayHistory(users) {
                const userGrid = document.getElementById('userGrid');
                userGrid.innerHTML = '';
                if (users.length === 0) {
                    userGrid.innerHTML = '<p>No users yet.</p>';
                } else {
                    users.forEach(user => {
                        const userCard = document.createElement('div');
                        userCard.className = 'user-card';
                        userCard.innerHTML = `
                            <img src="catherine.jpg" alt="${user.name}" class="card-image">
                            <h4>${user.name}</h4>
                            <p><strong>Wishlist:</strong> ${user.wishlist || 'None yet'}</p>
                        `;
                        userGrid.appendChild(userCard);
                    });
                }
            }
        </script>
    </body>
    </html>